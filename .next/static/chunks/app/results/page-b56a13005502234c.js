(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{1391:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var l=s(5155);let i=e=>{let{activePage:t,onNavigate:s}=e;return(0,l.jsx)("nav",{style:{backgroundColor:"#5046e5",color:"white",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)",height:"80px",width:"100%"},children:(0,l.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",height:"100%",display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 24px"},children:[(0,l.jsxs)("div",{onClick:()=>s("home"),style:{display:"flex",alignItems:"center",cursor:"pointer"},children:[(0,l.jsxs)("div",{style:{marginRight:"16px",display:"flex",flexDirection:"column",alignItems:"center",backgroundColor:"rgba(255,255,255,0.1)",padding:"8px",borderRadius:"8px",width:"60px",height:"60px",justifyContent:"center"},children:[(0,l.jsx)("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:"white",marginBottom:"4px"},children:(0,l.jsx)("path",{d:"M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,l.jsx)("span",{style:{color:"white",fontSize:"14px",fontWeight:"500"},children:"LUFS"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{style:{fontSize:"22px",fontWeight:"bold",margin:"0 0 4px 0",lineHeight:"1.2",color:"white"},children:"LUFS检测器"}),(0,l.jsx)("p",{style:{fontSize:"14px",margin:"0",color:"rgba(255,255,255,0.85)",fontWeight:"normal"},children:"专业音视频LUFS分析工具"})]})]}),(0,l.jsx)("div",{style:{display:"flex",gap:"24px"},children:(0,l.jsx)("button",{onClick:()=>s("home"),style:{backgroundColor:"home"===t?"rgba(255,255,255,0.2)":"transparent",color:"white",border:"none",padding:"8px 16px",borderRadius:"8px",fontSize:"16px",cursor:"pointer"},children:"首页"})})]})})}},2388:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var l=s(5155),i=s(2115),a=s(5012),r=s(5695),o=s(1391);function n(){let[e,t]=(0,i.useState)(null),[s,n]=(0,i.useState)(null),[d,m]=(0,i.useState)(!0),c=(0,r.useRouter)();(0,i.useEffect)(()=>{let e=localStorage.getItem("audioAnalysisResult");if(e)try{console.log("原始存储的数据:",e);let t=JSON.parse(e);console.log("解析后的数据:",t),console.log("integratedLUFS 类型:",typeof t.integratedLUFS),console.log("integratedLUFS 值:",t.integratedLUFS),console.log("platformCompatibilities 类型:",typeof t.platformCompatibilities),console.log("platformCompatibilities 值:",t.platformCompatibilities);let s=[];if(t&&"object"==typeof t){if("string"!=typeof t.fileName&&s.push("fileName 必须是字符串类型"),"number"!=typeof t.fileSize&&s.push("fileSize 必须是数字类型"),"string"!=typeof t.fileType&&s.push("fileType 必须是字符串类型"),"number"!=typeof t.duration&&s.push("duration 必须是数字类型"),"number"!=typeof t.integratedLUFS&&s.push("integratedLUFS 必须是数字类型"),Array.isArray(t.shortTermLUFSData)?t.shortTermLUFSData.some(e=>"number"!=typeof e)&&s.push("shortTermLUFSData 数组的所有元素必须是数字类型"):s.push("shortTermLUFSData 必须是数组类型"),"number"!=typeof t.truePeak&&s.push("truePeak 必须是数字类型"),"number"!=typeof t.loudnessRange&&s.push("loudnessRange 必须是数字类型"),t.platformCompatibilities&&"object"==typeof t.platformCompatibilities){if(Array.isArray(t.platformCompatibilities.platformCompatibility))for(let e of t.platformCompatibilities.platformCompatibility)"string"!=typeof e.name&&s.push("平台名称必须是字符串类型"),"number"!=typeof e.min&&s.push("平台最小值必须是数字类型"),"number"!=typeof e.max&&s.push("平台最大值必须是数字类型"),"boolean"!=typeof e.compatible&&s.push("平台兼容性必须是布尔类型"),["compatible","too_loud","too_quiet"].includes(e.status)||s.push("平台状态必须是 compatible、too_loud 或 too_quiet 之一");else s.push("platformCompatibility 必须是数组类型")}else s.push("platformCompatibilities 必须是一个对象")}else s.push("解析结果不是一个有效的对象");0===s.length?n(t):(console.error("数据验证错误:",s),n(null))}catch(e){console.error("解析分析结果失败:",e),n(null)}else console.log("未找到存储的分析结果"),n(null);m(!1)},[]),(0,i.useEffect)(()=>{if(s&&s.shortTermLUFSData){let l=document.getElementById("loudnessChart");l&&(e&&e.destroy(),t(new a.Ay(l,{type:"line",data:{labels:Array.from({length:s.shortTermLUFSData.length},(e,t)=>Math.ceil(t*(s.duration/s.shortTermLUFSData.length))),datasets:[{label:"短期响度",data:s.shortTermLUFSData,borderColor:"rgba(99, 102, 241, 1)",backgroundColor:"rgba(99, 102, 241, 0.1)",tension:.4,fill:!0},{label:"集成响度",data:Array(s.shortTermLUFSData.length).fill(s.integratedLUFS),borderColor:"rgba(220, 38, 38, 1)",borderWidth:2,borderDash:[5,5],pointRadius:0}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{title:{display:!0,text:"LUFS"},min:Math.floor(Math.min(...s.shortTermLUFSData,s.integratedLUFS)-2),max:Math.ceil(Math.max(...s.shortTermLUFSData,s.integratedLUFS)+2)},x:{title:{display:!0,text:"时间 (秒)"}}},plugins:{legend:{position:"top"},tooltip:{mode:"index",intersect:!1}}}})))}return()=>{e&&e.destroy()}},[s,e]);let x=e=>{"home"===e?c.push("/"):"results"===e&&c.push("/results")};return d?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{activePage:"results",onNavigate:x}),(0,l.jsx)("div",{className:"container mx-auto p-8",children:(0,l.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-4 border-b-4 border-indigo-600"})})})]}):s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{activePage:"results",onNavigate:x}),(0,l.jsxs)("div",{className:"container mx-auto p-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-8 text-gray-800 tracking-tight",children:"分析结果"}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"文件信息"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)("svg",{className:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"文件名"}),(0,l.jsx)("p",{className:"mt-1 font-medium text-gray-900 break-all",children:s.fileName})]})]}),(0,l.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"文件大小"}),(0,l.jsx)("p",{className:"mt-1 font-medium text-gray-900",children:s.fileSize>=1048576?"".concat((s.fileSize/1048576).toFixed(2)," MB"):"".concat((s.fileSize/1024).toFixed(2)," KB")})]})]}),(0,l.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,l.jsx)("div",{className:"flex-shrink-0 w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:(0,l.jsx)("svg",{className:"w-6 h-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"时长"}),(0,l.jsxs)("p",{className:"mt-1 font-medium text-gray-900",children:[Math.floor(s.duration/60),"分",Math.floor(s.duration%60),"秒"]})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"LUFS 测量结果"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsxs)("div",{className:"bg-indigo-50 p-6 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-indigo-600 mb-1",children:"集成响度"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-indigo-700",children:[s.integratedLUFS.toFixed(1),(0,l.jsx)("span",{className:"text-lg font-medium ml-1",children:"LUFS"})]})]}),(0,l.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-blue-600 mb-1",children:"短期响度"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-blue-700",children:[s.shortTermLUFSData[0].toFixed(1),(0,l.jsx)("span",{className:"text-lg font-medium ml-1",children:"LUFS"})]})]}),(0,l.jsxs)("div",{className:"bg-red-50 p-6 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-red-600 mb-1",children:"真峰值"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-red-700",children:[s.truePeak.toFixed(1),(0,l.jsx)("span",{className:"text-lg font-medium ml-1",children:"dBTP"})]})]}),(0,l.jsxs)("div",{className:"bg-emerald-50 p-6 rounded-lg",children:[(0,l.jsx)("p",{className:"text-sm font-medium text-emerald-600 mb-1",children:"响度范围"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-emerald-700",children:[s.loudnessRange.toFixed(1),(0,l.jsx)("span",{className:"text-lg font-medium ml-1",children:"LU"})]})]})]})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"平台兼容性"}),(0,l.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.platformCompatibilities.platformCompatibility.map((e,t)=>(0,l.jsxs)("div",{className:"p-6 rounded-lg border-l-4 ".concat(e.compatible?"bg-emerald-50 border-emerald-500":"too_loud"===e.status?"bg-red-50 border-red-500":"bg-amber-50 border-amber-500"),children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.name}),(0,l.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(e.compatible?"bg-emerald-100 text-emerald-800":"too_loud"===e.status?"bg-red-100 text-red-800":"bg-amber-100 text-amber-800"),children:e.compatible?"符合标准":"too_loud"===e.status?"音量过大":"音量过小"})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsxs)("p",{className:"text-sm font-medium text-gray-600",children:["目标范围: ",(0,l.jsxs)("span",{className:"text-gray-900",children:[e.min," 至 ",e.max," LUFS"]})]}),(0,l.jsxs)("p",{className:"text-sm font-medium text-gray-600",children:["当前值: ",(0,l.jsxs)("span",{className:"text-gray-900",children:[s.integratedLUFS.toFixed(1)," LUFS"]})]})]})]},t))})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"响度曲线"}),(0,l.jsx)("div",{className:"h-[400px]",children:(0,l.jsx)("canvas",{id:"loudnessChart"})})]})]})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.A,{activePage:"results",onNavigate:x}),(0,l.jsx)("div",{className:"container mx-auto p-8",children:(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"未找到分析结果"}),(0,l.jsx)("p",{className:"mb-4",children:"请返回首页上传文件进行分析。"}),(0,l.jsx)("button",{onClick:()=>c.push("/"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700",children:"返回首页"})]})})]})}},2427:(e,t,s)=>{Promise.resolve().then(s.bind(s,2388))}},e=>{var t=t=>e(e.s=t);e.O(0,[647,510,441,684,358],()=>t(2427)),_N_E=e.O()}]);